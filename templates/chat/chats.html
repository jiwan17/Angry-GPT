{% extends "base.html" %}
{% block content %}
<div style="display:flex;justify-content:space-between;align-items:center">
  <div>
    <h1 style="margin:0;font-size:22px">Your Chats</h1>
    <div style="color:var(--muted);font-size:13px;margin-top:6px">Manage conversations — click a card to open the chat.</div>
  </div>
  <div>
    <a href="{% url 'chat-new' %}" class="primary" style="padding:10px 14px;border-radius:10px;text-decoration:none">+ New Chat</a>
  </div>
</div>

<div style="margin-top:18px;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;align-items:start">
  {% for c in conversations %}
    <div class="card" style="padding:14px;display:flex;flex-direction:column;gap:8px;min-height:100px">
      <div style="display:flex;gap:12px;align-items:start">
        <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:white;font-weight:700">{{ c.title|default:'Conversation'|slice:":1"|upper }}</div>
        <div style="flex:1">
          <a href="{% url 'chat-detail' c.id %}" style="font-weight:700;color:var(--text);text-decoration:none;font-size:15px">{{ c.title|default:"Conversation" }}</a>
          <div style="color:var(--muted);font-size:13px;margin-top:6px">{{ c.created_at }}</div>
        </div>
      </div>
      <div style="margin-top:auto;display:flex;justify-content:space-between;align-items:center">
        <div style="color:var(--muted);font-size:13px">Messages: {{ c.messages.count }}</div>
        <div>
          <a href="{% url 'chat-detail' c.id %}" class="ghost" style="padding:6px 10px;border-radius:8px;text-decoration:none">Open</a>
        </div>
      </div>
    </div>
  {% empty %}
    <div style="grid-column:1/-1;padding:18px;border-radius:12px;background:var(--card);color:var(--muted)">No conversations yet — click <a href="{% url 'chat-new' %}">New Chat</a> to start.</div>
  {% endfor %}
</div>

<div style="margin-top:18px;display:flex;justify-content:flex-end">
  <a href="{% url 'logout' %}" class="ghost">Logout</a>
</div>
{% endblock %}
